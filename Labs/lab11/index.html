<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="#ffffff" name="theme-color" />
  <meta content="#da532c" name="msapplication-TileColor" />

  
  <link href='&#x2F;icons&#x2F;site.webmanifest' rel="manifest" />
  
  
  <link color="#5bbad5" href='&#x2F;icons&#x2F;safari-pinned-tab.svg' rel="mask-icon" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-16x16.png' rel="icon" sizes="16x16" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-32x32.png' rel="icon" sizes="32x32" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;apple-touch-icon.png' rel="apple-touch-icon" sizes="180x180" />
  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.css" integrity="sha384-+rY0QD+LRnTOquDMzGa9lXU6jIwdiQuwCJQ2cdcW0qeP/0UbjQCZlXnRsUMA+9pH" crossorigin="anonymous">
  

  
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" integrity="sha384-oGm59HWAkwO32h2w8u0B98wKBZJwd6MbWtAJwQKCTffZjOXHXrnyv9Syjovgc+UV" crossorigin="anonymous">
  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.1/css/academicons.min.css" integrity="sha384-FIue+PI4SsI9XfHCz8dBLg33b0c1fMJgNU3X//L26FYbGnlSEfWmNT7zgWc2N9b6" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link href="https://henrycc24.github.io/deep-thought.css" rel="stylesheet" />
  
  

  <title>
    
 | Lab 11

  </title>

  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=&lt;your_gtag&gt;"></script>
  <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "&lt;your_gtag&gt;");
  </script>
  
  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" integrity="sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx" crossorigin="anonymous"></script>

  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mathtex-script-type.min.js" integrity="sha384-jiBVvJ8NGGj5n7kJaiWwWp9AjC+Yh8rhZY3GtAX8yU28azcLgoRo4oukO87g7zDT" crossorigin="anonymous"></script>
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
  
  
</head>

<body class="has-background-white">
  <nav aria-label="section navigation" class="navbar is-light" role="navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item is-size-5 has-text-weight-bold" href="https:&#x2F;&#x2F;henrycc24.github.io"></a>
        <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navMenu" role="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-end has-text-centered">
          
          
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;">
            Home
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;Labs">
            Labs
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;about">
            about
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;reference">
            references
          </a>
          
          
          
          <a class="navbar-item" id="nav-search" title="Search" data-target="#search-modal">
            <span class="icon">
              <i class="fas fa-search"></i>
            </span>
          </a>
          <a class="navbar-item" id="dark-mode" title="Switch to dark theme">
            <span class="icon">
              <i class="fas fa-adjust"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  
  

  
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <article class="box">
          <h1 class="title">
            Lab 11
          </h1>
          <p class="subtitle">Localization</p>
          <div class="columns is-multiline is-gapless">
            <div class="column is-8">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="fas fa-user"></i>
  </span>
  <span>DeepThought published on</span>
  <span class="icon">
    <i class="far fa-calendar-alt"></i>
  </span>
  <span><time datetime="2025-05-15">May 15, 2025</time></span>
</span>

            </div>
            <div class="column is-4 has-text-right-desktop">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="far fa-clock"></i>
  </span>
  <span>6 min,</span>
  <span class="icon">
    <i class="fas fa-pencil-alt"></i>
  </span>
  <span>1107 words</span>
</span>

            </div>
            <div class="column">
              
            </div>
            <div class="column has-text-right-desktop">
              
            </div>
          </div>
          <div class="content mt-2">
            <blockquote>
<p>Lab 11 :  Localization on the real robot</p>
</blockquote>
<p><img src="https://henrycc24.github.io/Labs/lab11/planning.png" alt="alt text" /></p>
<h1 id="lab-11-localization">Lab 11 Localization</h1>
<h2 id="a-simulation">A. Simulation</h2>
<p>Similary to lab 10, we had to make sure the simulation for this lab worked propely by running lab11_sim.ipynb. Copying over the functions used in lab 10, we got these results for our simulation.</p>
<p><img src="https://henrycc24.github.io/Labs/lab11/prints.png" alt="alt text" />
<img src="https://henrycc24.github.io/Labs/lab11/car_sim.png" alt="alt text" />
<img src="https://henrycc24.github.io/Labs/lab11/sim.png" alt="alt text" /></p>
<p>As we conlcuded last last with red being the odometer, blue being the belief and green being the truth, the odomoter is incredidbly horrible at giving accurate data to the robots position in the map. However, the belief with the bayes filter is fairly accurate to the actual location of the robot.</p>
<h2 id="real-world">Real World</h2>
<p>Using Bayes Filter there is a predicaiton step and and update step. However, with our currents sesnors we don't actually have an odomoter to use, meaning that we really can't use the prediction step. Instead that means that we are only using the update step of the Bayes Filter. You could use the IMU with its accelerometer/gyro scope to supplement the odomoter however as seen by previous labs there is a lot of noise using it and it not worth the stress getting it to work. In order for the robot to guess its location we instead make is spin in place for a full circle taking measurements at incrmenets of 20 degrees. With the infomration that it gathered from this we then calculate the update step, which is done by using the perform_observation_loop function that we have to implement in the lab11 python file. Here is the function implemented.</p>
<p><img src="https://henrycc24.github.io/Labs/lab11/perform.png" alt="alt text" /></p>
<p>Also with the notification handler that we used in previous labs modified for this lab</p>
<p><img src="https://henrycc24.github.io/Labs/lab11/noti.png" alt="alt text" /></p>
<p>after connecting the robot with bluetooth, perform_observation_loop starts the notificaiton handler and sends the command to the robot to capture the the (360/20) 18 degree measurements for its given position. In order to make sure it has enough time to gather all the data we use asyncio to provide a delay of 10 seconds. At first I used time.sleep(10), but this caused the thread to be blocked, which is not ideal since we want the program to run concurrently. Afterwards we send the command to retrieve the data, and also provide a small delay to ensure all of it gets transfered  Next, we divide our measurements by 1000 to get it into meters and then converting the ray into a column vector by using np.array(array)[np.newaxis].T as per the hint. Returning our ranges and bearings as expected.</p>
<p>The commands that it ran use the code utilized in lab 9. Instead of going clockwise this time we are going counter clockwise and turning at 20 degrees instead.</p>
<h2 id="results">Results</h2>
<p>Now testing it we are given 4 points in which we have to localize at.
(-3 ft ,-2 ft ,0 deg)
(0 ft,3 ft, 0 deg)
(5 ft,-3 ft, 0 deg)
(5 ft,3 ft, 0 deg)</p>
<p>the graph provided is in meters scaling not feet. However looking at our gathered data we can see that we got fairly accurate results in the robot localzation.</p>
<h3 id="3-2">(-3, -2)</h3>
<p><img src="https://henrycc24.github.io/Labs/lab11/print_b_left.png" alt="alt text" />
<img src="https://henrycc24.github.io/Labs/lab11/bot_left.png" alt="alt text" /></p>
<p>The robot here consistently showcased it belief being very accurate to the ground truth throughout various runs. In this run the robot was slighlty off in the x and y axis being oriented a bit lower and to the left then the truth. This most likely stemmed from the fact that the robot had to measure data from the open gap at the top right which most likely either maxed out on the sensor or inaccuraetly meaured above the wooden wall.</p>
<h3 id="0-3">(0, 3)</h3>
<p><img src="https://henrycc24.github.io/Labs/lab11/print_t_left.png" alt="alt text" />
<img src="https://henrycc24.github.io/Labs/lab11/top_left.png" alt="alt text" /></p>
<p>This point was also showcasing a very accurate belief to the truth. This is some right shift, however, the data gathered here at this point is very unique alloiwng for a high belief in the baye's filter. With the top left being corned and the bottom and right having gaps, the robot was pretty much spot on every run when testing.</p>
<h3 id="5-3">(5, -3)</h3>
<p><img src="https://henrycc24.github.io/Labs/lab11/print_b_right.png" alt="alt text" />
<img src="https://henrycc24.github.io/Labs/lab11/bot_right.png" alt="alt text" /></p>
<p>This spot performed the worst when it came to running test runs for the spot. It kept believing that it was locating at (-3, -2) throughout my trials. However, at times it was able to accuraelty get a decent belief as showcased here. My best assumption is that the robot is getting wrong data when scanning around the top left corner. The sensor could be maxing out or as mentioned previosuly if the ToF slighltly tiled upwards/downards would give results of false wall enclosure. I do wonder if possible if we incrmented in more smaller increments, it would provide a better accurate belief. 20 degrees may seem small enough since it gets 18 different orientations, however, the small box enclosure at the right won't be accuratly scanned due to its distance. If it was closer to the robot it being read would'nt be a problem, but I fear that sometimes the robot doesn't really factor the data gather when it does scan that box since it may only be 1/2 orientations that accurately portray it.</p>
<h3 id="5-3-1">(5, 3)</h3>
<p><img src="https://henrycc24.github.io/Labs/lab11/print_t_right.png" alt="alt text" />
<img src="https://henrycc24.github.io/Labs/lab11/top_right.png" alt="alt text" /></p>
<p>Similary to the previous point (0,3) the belief is very accurate to the truth. For similar reasoning that the data it gathered was unique to its position being that is next to the top right corner, with openings towards the bottom and left.</p>
<h2 id="conclusion">Conclusion</h2>
<p>All in all, the robot in was able to localize itself at all the points. The bottom right point (5, -3) being the worst, however, my reasoning behind that is described above. I do belive that if the walls/items are closer to the robot it belief is far more accurate to the truth since it can get more readings from its orientations as seen by the top right and bottom left. I do wonder if changing the degrees to 10 to double the amount would alter these reults, and seeing if changing the positiong of the Tof could've affected it. Furthermore maybe possible incoprating 2 ToFs, such that I get double the data at the same orientation might have either helped or showed the same results that is unknown. However, due to my 2nd ToF not being a perfect 90 from the first it actually might've aided in providing a proper belief since It could gather for example the small enclosure when the first ToF didin't many readyins. Baye's filter, in general is a fairly accurate method of determing a robot's location even without our preidcition step being used.</p>

          </div>
        </article>
      </div>
      
    </div>
  </div>
</section>


  
  <section class="modal" id="search-modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Search</p>
      </header>
      <section class="modal-card-body">
        <div class="field mb-2">
          <div class="control">
            <input class="input" id="search" placeholder="Search this website." type="search" />
          </div>
        </div>
        <div class="search-results">
          <div class="search-results__items"></div>
        </div>
      </section>
    </div>
    <button aria-label="close" class="modal-close is-large"></button>
  </section>
  


  

<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <nav class="level">
              
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;Labs&#x2F;lab12&#x2F;">
              <span class="icon mr-2">
                <i class="fas fa-arrow-circle-left"></i>
              </span>
              Lab 12
            </a>
          </div>
           
        </nav>
      </div>
    </div>
  </div>
</section>



  



  
  <footer class="footer py-4">
    <div class="content has-text-centered">
      <p>
        Built with
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-code"></i>
          </span>
          <span>code</span>
        </span>
        and
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-heart"></i>
          </span>
          <span>love</span>
        </span>
      </p>
      <p>
        Powered by
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-power-off"></i>
          </span>
          <span>zola</span>
        </span>
      </p>
    </div>
  </footer>
  

  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/galleria.min.js" integrity="sha384-QSfwGT8/EU536DKdtyP2D6SLlh8zBaZ0cVkwfrwhqzIU9VCfJT00CLVP5t+HAiYg" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.js" integrity="sha384-DwpKI+deZB267+hPKwiOIc5Y2GKsVL0mR6hgz7GgIu7AgAMYqJwcJKY1YBNfhWcY" crossorigin="anonymous"></script>
  
  
  <script src="https://cdn.jsdelivr.net/npm/mermaid@8.13.5/dist/mermaid.min.js" integrity="sha384-0yWn54pSGtfKCU+skfA69l25VsCw+MZt4LQov3xNRoS7YkAMrFokGgSBnAWSK4pv" crossorigin="anonymous"></script>
  
  
  <script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1.1.13/dist/chart.xkcd.min.js" integrity="sha384-xC3h1+IHXK8seA+8KfT79Z4e0GPsznjXBoMa5nd8ooWKplPyXx92NOmljWxLC/cs" crossorigin="anonymous"></script>
  
  
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js" integrity="sha384-Pulw7+h73841BQIK0LzJCydKRPChJUF9w8h8W0o3h+cLtoyNPJS847bQauLWOTwg" crossorigin="anonymous"></script>
  
  <script src="https://henrycc24.github.io/elasticlunr.min.js"></script>
  <script src="https://henrycc24.github.io/search_index.en.js"></script><script src="https://henrycc24.github.io/js/site.js"></script>

  





  
  
</body>

</html>
