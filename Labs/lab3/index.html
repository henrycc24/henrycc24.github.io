<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="#ffffff" name="theme-color" />
  <meta content="#da532c" name="msapplication-TileColor" />

  
  <link href='&#x2F;icons&#x2F;site.webmanifest' rel="manifest" />
  
  
  <link color="#5bbad5" href='&#x2F;icons&#x2F;safari-pinned-tab.svg' rel="mask-icon" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-16x16.png' rel="icon" sizes="16x16" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-32x32.png' rel="icon" sizes="32x32" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;apple-touch-icon.png' rel="apple-touch-icon" sizes="180x180" />
  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.css" integrity="sha384-+rY0QD+LRnTOquDMzGa9lXU6jIwdiQuwCJQ2cdcW0qeP/0UbjQCZlXnRsUMA+9pH" crossorigin="anonymous">
  

  
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" integrity="sha384-oGm59HWAkwO32h2w8u0B98wKBZJwd6MbWtAJwQKCTffZjOXHXrnyv9Syjovgc+UV" crossorigin="anonymous">
  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.1/css/academicons.min.css" integrity="sha384-FIue+PI4SsI9XfHCz8dBLg33b0c1fMJgNU3X//L26FYbGnlSEfWmNT7zgWc2N9b6" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link href="https://henrycc24.github.io/deep-thought.css" rel="stylesheet" />
  
  

  <title>
    
 | Lab3

  </title>

  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=&lt;your_gtag&gt;"></script>
  <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "&lt;your_gtag&gt;");
  </script>
  
  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" integrity="sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx" crossorigin="anonymous"></script>

  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mathtex-script-type.min.js" integrity="sha384-jiBVvJ8NGGj5n7kJaiWwWp9AjC+Yh8rhZY3GtAX8yU28azcLgoRo4oukO87g7zDT" crossorigin="anonymous"></script>
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
  
  
</head>

<body class="has-background-white">
  <nav aria-label="section navigation" class="navbar is-light" role="navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item is-size-5 has-text-weight-bold" href="https:&#x2F;&#x2F;henrycc24.github.io"></a>
        <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navMenu" role="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-end has-text-centered">
          
          
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;">
            Home
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;Labs">
            Labs
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;about">
            about
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;reference">
            references
          </a>
          
          
          
          <a class="navbar-item" id="nav-search" title="Search" data-target="#search-modal">
            <span class="icon">
              <i class="fas fa-search"></i>
            </span>
          </a>
          <a class="navbar-item" id="dark-mode" title="Switch to dark theme">
            <span class="icon">
              <i class="fas fa-adjust"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  
  

  
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <article class="box">
          <h1 class="title">
            Lab3
          </h1>
          <p class="subtitle">Third Lab</p>
          <div class="columns is-multiline is-gapless">
            <div class="column is-8">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="fas fa-user"></i>
  </span>
  <span>DeepThought published on</span>
  <span class="icon">
    <i class="far fa-calendar-alt"></i>
  </span>
  <span><time datetime="2025-01-31">January 31, 2025</time></span>
</span>

            </div>
            <div class="column is-4 has-text-right-desktop">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="far fa-clock"></i>
  </span>
  <span>4 min,</span>
  <span class="icon">
    <i class="fas fa-pencil-alt"></i>
  </span>
  <span>764 words</span>
</span>

            </div>
            <div class="column">
              
            </div>
            <div class="column has-text-right-desktop">
              
            </div>
          </div>
          <div class="content mt-2">
            <blockquote>
<p>Lab3: In This lab we add TOF sensors to transmit distances for our car robot while its traveling.</p>
</blockquote>
<h2 id="prelab">**Prelab</h2>
<p>For the prelab, we have to give thought of the place of out ToF sensors. There are several combinations possible, however, I will choose front and back to place my ToF sensors so that it can traverse both forward and reverse knowing if there are any obstacles in the way. However, it will have blind spots at its sides which may cause trouble avodiing obstacles. To use both sensors first, we have to take note of the address of them. Both of them share the address 0x52. This needs to be changed when we run them they don't conflict. To do so one of the sensors we will soder on an extra cable connecting XSHUT to an analog pin on the Artemis. In this case I used A2, and we set the pin LOW in our code then alter the address (I did 0x32), aftewards to use the 2nd one you set the XSHUT high. Allowing both sensors to run at the same time.</p>
<pre data-lang="c" style="background-color:#2b303b;color:#c0c5ce;" class="language-c "><code class="language-c" data-lang="c"><span>    </span><span style="color:#bf616a;">digitalWrite</span><span>(SHUTDOWN_PIN, LOW);
</span><span>    distanceSensor1.</span><span style="color:#bf616a;">setI2CAddress</span><span>(ADDRESS); 
</span><span>    </span><span style="color:#bf616a;">digitalWrite</span><span>(SHUTDOWN_PIN, HIGH); 
</span></code></pre>
<p>Wiring Diagram:
<img src="https://henrycc24.github.io/Labs/lab3/Wiring_diagram.png" alt="alt text" /></p>
<h1 id="tasks">Tasks</h1>
<h1 id="lab-3">Lab 3</h1>
<h2 id="1-tof-and-breakout-board">**1. ToF and Breakout Board **</h2>
<p>Using the wiring diagram above, we were able to connect the ToF to our breakout board as seen:</p>
<p><img src="https://henrycc24.github.io/Labs/lab3/battery_con.png" alt="alt text" /></p>
<p>Noting that like previous lab, we are able to power it up with the battery and connect to it via bluetooth.
Here how the board was soldered:</p>
<p><img src="https://henrycc24.github.io/Labs/lab3/bottom_solder.png" alt="alt text" /> <img src="https://henrycc24.github.io/Labs/lab3/top_solder.png" alt="alt text" /></p>
<p><img src="https://henrycc24.github.io/Labs/lab3/connected_ble.png" alt="alt text" /></p>
<h2 id="2-scanning-the-for-address">**2. Scanning the for Address</h2>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>&gt; file-&gt;Examples-&gt;Apollo3-&gt;Example05_Wire_I2C.ino
</span></code></pre>
<p><img src="https://henrycc24.github.io/Labs/lab3/address.png" alt="alt text" /></p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>We get an address reading of 0x29. At first I was perplexed since it didn&#39;t match 0x52 from the datasheet. However, I realized with the last byte of both 52 = 0101 0010, 29 = 0010 1001 that 0x29 is just 0x52 but shifted to the left. The LSB got removed since this is the read/write bit, meaning we can assign with any address != 29. 
</span></code></pre>
<h2 id="3-tof-sensor">**3. TOF Sensor</h2>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>The sensor has 3 modes, short, medium, and long. The larger distance mode you choose, the more it is affected by ambient light. Long has the longets distance of 4 m, however, will only be able to measure 73 cm with strong ambient light. Short doesn&#39;t get affected by ambient light as much, and can do around 136 cm both in the dark and with strong ambient light. Which in our case will prove to be very useufl since we will most liekly driving our guy with ambient light around, rather then the dark. We want the farthest distance we can get with that affecdt, which in this case is short. 
</span><span>
</span><span>I&#39;ve decided to test short range:
</span></code></pre>
<p><img src="https://henrycc24.github.io/Labs/lab3/short_code.png" alt="alt text" /> <img src="https://henrycc24.github.io/Labs/lab3/short_measure.png" alt="alt text" /></p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>Here are the measuremnets of actual vs measured between 400 - 1900 mm: 
</span></code></pre>
<p><img src="https://henrycc24.github.io/Labs/lab3/ABS_diff.png" alt="alt text" /> <img src="https://henrycc24.github.io/Labs/lab3/ActvsMeas.png" alt="alt text" /></p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>Looking at these graphs once you reach past 1300 mms the data becomes less accurate which is to be expected. Graphing the means using np.mean and mp.std to get standard. The std increased the further we got, showing more noise/variance in measurements. 
</span></code></pre>
<h2 id="4-multiple-tof-and-imu">**4. Multiple ToF and IMU</h2>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>Setup for 2 ToF by changing address of one of them: 
</span></code></pre>
<p><img src="https://henrycc24.github.io/Labs/lab3/loop.png" alt="alt text" /><img src="https://henrycc24.github.io/Labs/lab3/setup.png" alt="alt text" /></p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>Connecting 2 ToF and IMU we collect 2000 sample data points and then send it via bluetooth. These are the results: (Collected parallel as can be seen by X-axis)
</span></code></pre>
<p><img src="https://henrycc24.github.io/Labs/lab3/TOF1vsTOF2.png" alt="alt text" />
<img src="https://henrycc24.github.io/Labs/lab3/acc.png" alt="alt text" /><img src="https://henrycc24.github.io/Labs/lab3/Gyro.png" alt="alt text" /></p>
<p><a href="https://youtu.be/kcKIogiezIA"><img src="https://markdown-videos-api.jorgenkh.no/youtube/kcKIogiezIA" alt="" /></a></p>
<p>Key note is that ToF sensors collect less data points over the same period as the acc and gyro. As can be seen on teh graph ToFs collected ~31 points while acc/gyro collected 2000 io the same time. I had to create a seperate array such that when I graph it the distances won't be zerod out since it there were no distances collected for hundreds of time stamps.</p>
<h2 id="5-limiting-factor">**5. Limiting Factor</h2>
<p><img src="https://henrycc24.github.io/Labs/lab3/dt_times.png" alt="alt text" />
<a href="https://youtu.be/X2TuPMtNqvs"><img src="https://markdown-videos-api.jorgenkh.no/youtube/X2TuPMtNqvs" alt="" /></a></p>
<p>As previousuly mentioned ToF sesnors need time until it can collect data again.  The time it took for a since ToF varied around 6 ms, and the 2nd was longer with 9ms. Which seems extremely small however, relative 2 the other sensors which collect data incredidbly fast it is slow. Which is why when collecing data, i accounted for a seperate time/collection array just so the values didn't bounce to 0. The limiting factor would in this case be 9 ms the longer time to collect data.</p>
<p><img src="https://henrycc24.github.io/Labs/lab3/dts_.png" alt="alt text" /></p>

          </div>
        </article>
      </div>
      
    </div>
  </div>
</section>


  
  <section class="modal" id="search-modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Search</p>
      </header>
      <section class="modal-card-body">
        <div class="field mb-2">
          <div class="control">
            <input class="input" id="search" placeholder="Search this website." type="search" />
          </div>
        </div>
        <div class="search-results">
          <div class="search-results__items"></div>
        </div>
      </section>
    </div>
    <button aria-label="close" class="modal-close is-large"></button>
  </section>
  


  

<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <nav class="level">
              
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;Labs&#x2F;lab4&#x2F;">
              <span class="icon mr-2">
                <i class="fas fa-arrow-circle-left"></i>
              </span>
              Lab3
            </a>
          </div>
           
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;Labs&#x2F;lab2&#x2F;">
              Lab 2<span class="icon ml-2">
                <i class="fas fa-arrow-circle-right"></i>
              </span>
            </a>
          </div>
          
        </nav>
      </div>
    </div>
  </div>
</section>



  



  
  <footer class="footer py-4">
    <div class="content has-text-centered">
      <p>
        Built with
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-code"></i>
          </span>
          <span>code</span>
        </span>
        and
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-heart"></i>
          </span>
          <span>love</span>
        </span>
      </p>
      <p>
        Powered by
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-power-off"></i>
          </span>
          <span>zola</span>
        </span>
      </p>
    </div>
  </footer>
  

  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/galleria.min.js" integrity="sha384-QSfwGT8/EU536DKdtyP2D6SLlh8zBaZ0cVkwfrwhqzIU9VCfJT00CLVP5t+HAiYg" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.js" integrity="sha384-DwpKI+deZB267+hPKwiOIc5Y2GKsVL0mR6hgz7GgIu7AgAMYqJwcJKY1YBNfhWcY" crossorigin="anonymous"></script>
  
  
  <script src="https://cdn.jsdelivr.net/npm/mermaid@8.13.5/dist/mermaid.min.js" integrity="sha384-0yWn54pSGtfKCU+skfA69l25VsCw+MZt4LQov3xNRoS7YkAMrFokGgSBnAWSK4pv" crossorigin="anonymous"></script>
  
  
  <script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1.1.13/dist/chart.xkcd.min.js" integrity="sha384-xC3h1+IHXK8seA+8KfT79Z4e0GPsznjXBoMa5nd8ooWKplPyXx92NOmljWxLC/cs" crossorigin="anonymous"></script>
  
  
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js" integrity="sha384-Pulw7+h73841BQIK0LzJCydKRPChJUF9w8h8W0o3h+cLtoyNPJS847bQauLWOTwg" crossorigin="anonymous"></script>
  
  <script src="https://henrycc24.github.io/elasticlunr.min.js"></script>
  <script src="https://henrycc24.github.io/search_index.en.js"></script><script src="https://henrycc24.github.io/js/site.js"></script>

  





  
  
</body>

</html>
