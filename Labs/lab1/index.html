<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="#ffffff" name="theme-color" />
  <meta content="#da532c" name="msapplication-TileColor" />

  
  <link href='&#x2F;icons&#x2F;site.webmanifest' rel="manifest" />
  
  
  <link color="#5bbad5" href='&#x2F;icons&#x2F;safari-pinned-tab.svg' rel="mask-icon" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-16x16.png' rel="icon" sizes="16x16" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-32x32.png' rel="icon" sizes="32x32" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;apple-touch-icon.png' rel="apple-touch-icon" sizes="180x180" />
  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.css" integrity="sha384-+rY0QD+LRnTOquDMzGa9lXU6jIwdiQuwCJQ2cdcW0qeP/0UbjQCZlXnRsUMA+9pH" crossorigin="anonymous">
  

  
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" integrity="sha384-oGm59HWAkwO32h2w8u0B98wKBZJwd6MbWtAJwQKCTffZjOXHXrnyv9Syjovgc+UV" crossorigin="anonymous">
  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.1/css/academicons.min.css" integrity="sha384-FIue+PI4SsI9XfHCz8dBLg33b0c1fMJgNU3X//L26FYbGnlSEfWmNT7zgWc2N9b6" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link href="https://henrycc24.github.io/deep-thought.css" rel="stylesheet" />
  
  

  <title>
    
 | Lab 1

  </title>

  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=&lt;your_gtag&gt;"></script>
  <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "&lt;your_gtag&gt;");
  </script>
  
  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" integrity="sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx" crossorigin="anonymous"></script>

  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mathtex-script-type.min.js" integrity="sha384-jiBVvJ8NGGj5n7kJaiWwWp9AjC+Yh8rhZY3GtAX8yU28azcLgoRo4oukO87g7zDT" crossorigin="anonymous"></script>
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
  
  
</head>

<body class="has-background-white">
  <nav aria-label="section navigation" class="navbar is-light" role="navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item is-size-5 has-text-weight-bold" href="https:&#x2F;&#x2F;henrycc24.github.io"></a>
        <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navMenu" role="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-end has-text-centered">
          
          
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;">
            Home
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;Labs">
            Labs
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;about">
            about
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;reference">
            references
          </a>
          
          
          
          <a class="navbar-item" id="nav-search" title="Search" data-target="#search-modal">
            <span class="icon">
              <i class="fas fa-search"></i>
            </span>
          </a>
          <a class="navbar-item" id="dark-mode" title="Switch to dark theme">
            <span class="icon">
              <i class="fas fa-adjust"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  
  

  
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <article class="box">
          <h1 class="title">
            Lab 1
          </h1>
          <p class="subtitle">Connecting Bluetooth to the Nano</p>
          <div class="columns is-multiline is-gapless">
            <div class="column is-8">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="fas fa-user"></i>
  </span>
  <span>DeepThought published on</span>
  <span class="icon">
    <i class="far fa-calendar-alt"></i>
  </span>
  <span><time datetime="2025-01-31">January 31, 2025</time></span>
</span>

            </div>
            <div class="column is-4 has-text-right-desktop">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="far fa-clock"></i>
  </span>
  <span>8 min,</span>
  <span class="icon">
    <i class="fas fa-pencil-alt"></i>
  </span>
  <span>1420 words</span>
</span>

            </div>
            <div class="column">
              
            </div>
            <div class="column has-text-right-desktop">
              
            </div>
          </div>
          <div class="content mt-2">
            <blockquote>
<p>Lab1: The Artemis Board and BlueTooth</p>
</blockquote>
<h2 id="prelab">Prelab</h2>
<p>Before starting the lab we had to setup our computers in order for us to work with the Adruino. Doing this requrired us downloading the <strong>Arduino IDE</strong>. Luckily for me even though I have a Mac, I haven't updated it in years, so I don't have to download any additional drivers. Getting that out of the way, next I had to setup my environemnt in Python in order to send and recieve messages from the ardruino, Having Pip and Python latest versions already installed all I had to do was download the virtual environment (activate it), downlaod the necessary python packages, the codebase, and Jupyter Notebook.</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>source FastRobots_ble/</span><span style="color:#96b5b4;">bin</span><span>/activate
</span><span>pip install numpy pyyaml colorama nest_asyncio leak jupyterlab
</span></code></pre>
<p>The codebase we are working in is ble_arduino where it has the files ble_arduino.ino, BLECstringCharacteristic.h, EString.h, RobotCommand.h which to sum up do:</p>
<p><strong>RobotCommand.h</strong></p>
<ul>
<li>Used when Artemes recieves string format of</li>
</ul>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>&lt;cmd_type&gt;:&lt;value1&gt;|&lt;value2&gt;</span><span style="color:#d08770;">...
</span></code></pre>
<ul>
<li>robot_cmd(:|) whrere ":l" is deilmiter</li>
<li>&lt;cmd_type&gt; is an int and <value> can be either an int, float, string</li>
<li>Main way we will by sending commands in jupyter notebook</li>
</ul>
<p><strong>EString.h.h</strong></p>
<ul>
<li>Used to manipulate char arrays</li>
<li>provides getter and setter functions</li>
<li>Clear(), append(), c_str(), are all used throuhgout to send charracter arrays.</li>
<li>Used to transmit strings from the Artemis to the computer (main way we recieve data in lab)</li>
</ul>
<p><strong>BLECstringCharacteristic.h</strong></p>
<ul>
<li>Use to receive data from the artemis</li>
<li>writeValue(value): the value is what we transmit to the computer</li>
</ul>
<p><strong>ble_arduino.ino</strong></p>
<ul>
<li>Main file we will be editing and connecting though our Artemis wth BLE</li>
<li>Contains our UUIDS (University unique identifiers)</li>
</ul>
<p>Furthermore, we had to configure ble_arduino such that we print our unique MAC_ADDRESS and create a new UUID. This is to make sure that we only connect to our device and not the rest of the students in the lab. Changing this in our ble_arduino.ino and Juptyer Notebook, now allowed us to our tasks.</p>
<h1 id="tasks">Tasks</h1>
<h1 id="lab-1a">Lab 1A</h1>
<p>The first lab we look into the examples given in the Ardruino library to test out our Artemis capabilities.</p>
<h2 id="1-blink"><strong>1. Blink</strong></h2>
<p><a href="https://youtu.be/SVlN_UHRQ4E"><img src="https://markdown-videos-api.jorgenkh.no/youtube/SVlN_UHRQ4E" alt="" /></a></p>
<p>The first example we tested was blinking an LED, as shown above and here is where I configured my Baud rate to 115200 in order to properly work.</p>
<h2 id="2-serial-monitor"><strong>2. Serial Monitor</strong></h2>
<p><a href="https://youtu.be/361qbpHtpAU"><img src="https://markdown-videos-api.jorgenkh.no/youtube/361qbpHtpAU" alt="" /></a></p>
<p>Next, we opened over the serial monitor and making sure the baud is right we are able to type messages inside of it as shown in the video.</p>
<h2 id="3-temperature-sensor"><strong>3. Temperature Sensor</strong></h2>
<p><a href="https://youtu.be/bMS_tNvHVv4"><img src="https://markdown-videos-api.jorgenkh.no/youtube/bMS_tNvHVv4" alt="" /></a></p>
<p>Here we test our temperature sensor, by placing our finger on top of it and seeing the it rise and fall as we move it off/on it.</p>
<h2 id="4-microphone"><strong>4. Microphone</strong></h2>
<p><a href="https://youtu.be/9v8sVgSSDyg"><img src="https://markdown-videos-api.jorgenkh.no/youtube/9v8sVgSSDyg" alt="" /></a></p>
<p>Lastly, we test to see if our microphone is working by checking if there is a change in frequency due to sound. As seen in the video I attempted to whistle, and there was some change, so I'll take it.</p>
<h1 id="lab-1b">Lab 1B</h1>
<h2 id="1-echo"><strong>1. ECHO</strong></h2>
<p>The first command we implemented was ECHO. This just ment that we would send a string to our Artemis and it will reply with "Robot says -&gt; string sent".</p>
<p><img src="https://henrycc24.github.io/Labs/lab1/ECHO_CMD.PNG" alt="alt text" />
<img src="https://henrycc24.github.io/Labs/lab1/ECHO.png" alt="alt text" /></p>
<p>The above image showcases how we clear our char array and then append "Robot says", with the next line adding our message then sending that whole char array back to us. With the other image showing what we receive.</p>
<h2 id="2-send-three-floats"><strong>2. SEND_THREE_FLOATS</strong></h2>
<p><img src="https://henrycc24.github.io/Labs/lab1/Three_CMD.png" alt="alt text" /></p>
<p>Next we had to send three floats to the Artemis, and it had to extract each individual value. Knowing that | seperates values, we send three floats with | in between, and with the .get_next_value cmd we can seperate each one simply.</p>
<p><img src="https://henrycc24.github.io/Labs/lab1/Three_floats.png" alt="alt text" /></p>
<h2 id="3-get-time-millis"><strong>3. GET_TIME_MILLIS</strong></h2>
<p>Next, we implement a command to fetch time in ms. Like earlier we will simply use the function millis(), andn append it into a character array with T:.</p>
<p><img src="https://henrycc24.github.io/Labs/lab1/Get_time.png" alt="alt text" />
<img src="https://henrycc24.github.io/Labs/lab1/Get_cmd.png" alt="alt text" /></p>
<h2 id="4-notifciation-handler"><strong>4. Notifciation Handler</strong></h2>
<p>We then setup a notifcation handler, where it will receive the stringss from the Artemis board sends, and then configure it to split the data so we can use it. This is down by using .split, and then later we append them to lists.</p>
<p><img src="https://henrycc24.github.io/Labs/lab1/Noti.png" alt="alt text" /></p>
<p>Here it is being used to print out time in ms automatically for us.</p>
<p><img src="https://henrycc24.github.io/Labs/lab1/Noti_hand.png" alt="alt text" /></p>
<h2 id="5-time-loop"><strong>5. Time Loop</strong></h2>
<p><img src="https://henrycc24.github.io/Labs/lab1/time_loop.png" alt="alt text" /></p>
<p>Now we need to create a loop that sends out current time in ms. Using our functions from before, we simply create a while loop with us looping until we hit 10000. I used 10000 because, 10000/1000 = 10 seconds which is a very nice number to divide with. Incrementing int i to know how many messages are sent, at the end we were able to send 500 messages in 10 seconds. Which means ~ 50 msgs/s. The size of the char array I sent was 9, meaning 9 bytes per message so 450 bytes per message is the data transfer rate i got.</p>
<h2 id="6-time-array"><strong>6. Time Array</strong></h2>
<p>With creating a time loop, now we need to store these times into an array. To do this first you have to create a global variables:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>const int data_array_size = </span><span style="color:#d08770;">1000</span><span>;
</span><span>int Time_array[data_array_size];
</span></code></pre>
<p>I choose to gather 1000 max samples of time so I don't take to long sending/gathering data. Next simply we just createa a foor loop that iterating thorugh the array as shown below.</p>
<p><img src="https://henrycc24.github.io/Labs/lab1/Time_array.png" alt="alt text" /></p>
<p>Next to send a data, we just create a similar loop, but this time instead of placing values into our array we read our time_array values using a for loop. Then like before we appendn them as character arrays and send that message to the computer.</p>
<p><img src="https://henrycc24.github.io/Labs/lab1/Send_Ti_Array.png" alt="alt text" /></p>
<p>Here what we see on our side when we call it (Using the notificatoin handler)</p>
<p><img src="https://henrycc24.github.io/Labs/lab1/Jupy_Send.png" alt="alt text" /></p>
<h2 id="7-time-and-temp-array"><strong>7. Time and Temp Array</strong></h2>
<p>Now, we have to integrate getting temperature at the same tie as getting our time stamps. Using a similar method of creating an array, and then looping thorugh it as we did time we have as shown below with the same array size. Using millis() to get time and getTempDegF() to get temperature.</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>int Temp_array[data_array_size];
</span></code></pre>
<p><img src="https://henrycc24.github.io/Labs/lab1/Ti_Te.png" alt="alt text" /></p>
<p>After creating our array, we use the same method as time, we just append our temperature to the char array and send it to the computer.</p>
<p><img src="https://henrycc24.github.io/Labs/lab1/Jupy_TiTe.png" alt="alt text" /></p>
<p>This is what it looks like from our side when we call the command!</p>
<h2 id="8-pros-cons"><strong>8. Pros/Cons</strong></h2>
<p>The two methods we explore is sending data while collecting it (live), and gathering the data into a array, and then sending the array. When it comes to having a large amount of data that you want to send it is best to gather it an array since you will collect way more data in a given time. Experimenting with sending data and then sending, if you do it in a for loop it will take signficianlty longer. The for loop has to iterate through to gather each data, and then send the data in char arrarys to the computer which take ages. However, if you just append all the data into an array and have a seperate command to send it then you won't face that time hold up! Meaning if you want more data per second, and you want to gather a lot then use an array first then send it. However, if you're only looking at a few values then doing it live won't cause to much time delay. It better to do live sending when first implementing functions/sensors to make sure they're operating properly. However, once you know they are set up correct, then I would switch out the send statements so you can gather more data.</p>
<h2 id="discussion"><strong>Discussion</strong></h2>
<p>In this lab I wanted to experiment with typedef struct, which can be seen above when I was gather Temp and Time. I thought that maybe, this would save me some time and be easier, however, I was completely wrong. It felt way more complicated using my own type, instead of simply using creating another array, which trust me I learned for future labs. I also tinkered with how much bytes a message could send and if that would affect its msg rate. I went up to 15 bytes of data per msg and didn't see to much of a change from the orignal, however,i didn't limit test it as I would've liked to. Which makes me wonder what is the max for it, which I feel like I'll find out bby mistake.</p>

          </div>
        </article>
      </div>
      
    </div>
  </div>
</section>


  
  <section class="modal" id="search-modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Search</p>
      </header>
      <section class="modal-card-body">
        <div class="field mb-2">
          <div class="control">
            <input class="input" id="search" placeholder="Search this website." type="search" />
          </div>
        </div>
        <div class="search-results">
          <div class="search-results__items"></div>
        </div>
      </section>
    </div>
    <button aria-label="close" class="modal-close is-large"></button>
  </section>
  


  

<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <nav class="level">
              
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;Labs&#x2F;lab2&#x2F;">
              <span class="icon mr-2">
                <i class="fas fa-arrow-circle-left"></i>
              </span>
              Lab 2
            </a>
          </div>
           
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;henrycc24.github.io&#x2F;Labs&#x2F;lab7&#x2F;">
              Lab 7<span class="icon ml-2">
                <i class="fas fa-arrow-circle-right"></i>
              </span>
            </a>
          </div>
          
        </nav>
      </div>
    </div>
  </div>
</section>



  



  
  <footer class="footer py-4">
    <div class="content has-text-centered">
      <p>
        Built with
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-code"></i>
          </span>
          <span>code</span>
        </span>
        and
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-heart"></i>
          </span>
          <span>love</span>
        </span>
      </p>
      <p>
        Powered by
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-power-off"></i>
          </span>
          <span>zola</span>
        </span>
      </p>
    </div>
  </footer>
  

  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/galleria.min.js" integrity="sha384-QSfwGT8/EU536DKdtyP2D6SLlh8zBaZ0cVkwfrwhqzIU9VCfJT00CLVP5t+HAiYg" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.js" integrity="sha384-DwpKI+deZB267+hPKwiOIc5Y2GKsVL0mR6hgz7GgIu7AgAMYqJwcJKY1YBNfhWcY" crossorigin="anonymous"></script>
  
  
  <script src="https://cdn.jsdelivr.net/npm/mermaid@8.13.5/dist/mermaid.min.js" integrity="sha384-0yWn54pSGtfKCU+skfA69l25VsCw+MZt4LQov3xNRoS7YkAMrFokGgSBnAWSK4pv" crossorigin="anonymous"></script>
  
  
  <script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1.1.13/dist/chart.xkcd.min.js" integrity="sha384-xC3h1+IHXK8seA+8KfT79Z4e0GPsznjXBoMa5nd8ooWKplPyXx92NOmljWxLC/cs" crossorigin="anonymous"></script>
  
  
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js" integrity="sha384-Pulw7+h73841BQIK0LzJCydKRPChJUF9w8h8W0o3h+cLtoyNPJS847bQauLWOTwg" crossorigin="anonymous"></script>
  
  <script src="https://henrycc24.github.io/elasticlunr.min.js"></script>
  <script src="https://henrycc24.github.io/search_index.en.js"></script><script src="https://henrycc24.github.io/js/site.js"></script>

  





  
  
</body>

</html>
